<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>NEXTATION ‚Äì Time & Place (Subject ¬∑ Verb ¬∑ Place ¬∑ Time)</title>
  <style>
    :root {
      /* Core backgrounds (from NEXTATION colour system) */
      --bg-main: #02030b;
      --bg-gradient: radial-gradient(circle at top, #1c1f3b 0%, #050716 45%, #02030b 100%);
      /* Surfaces / Cards */
      --card-bg: rgba(15, 18, 40, 0.92);
      --card-soft-bg: rgba(18, 21, 50, 0.88);
      /* Neon accents */
      --accent-cyan: #4ef2ff;
      --accent-pink: #ff2f92;
      --accent-green: #4dff9b;
      --accent-yello: #ffe25f;
      --accent-purple: #aa5dff;
      /* Text and borders */
      --muted: rgba(255,255,255,0.65);
      --border-glow: rgba(120,120,255,0.45);
      /* Shadows */
      --shadow-soft: 0 0 20px rgba(0,0,0,0.65);
      /* Radii and transitions */
      --radius-lg: 22px;
      --radius-md: 16px;
      --radius-sm: 10px;
      --transition-fast: 0.18s ease-out;
    }

    *{box-sizing:border-box;margin:0;padding:0;}
    body{
      font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      background:var(--bg-gradient);
      color:#fff;
      min-height:100vh;
      padding:24px;
      display:flex;
      justify-content:center;
    }
    .app{max-width:1100px;width:100%;}

    /* HEADER */
    .neon-header{
      position:relative;
      padding:18px 22px 14px;
      border-radius:var(--radius-lg);
      background:rgba(3,5,20,0.9);
      box-shadow:var(--shadow-soft);
      border:1px solid var(--border-glow);
      margin-bottom:20px;
      overflow:hidden;
    }
    .neon-header::before{
      content:"";
      position:absolute;
      inset:-1px;
      background:linear-gradient(90deg,#00f5ff,#ff2f92,#ffe25f,#4dff9b);
      opacity:.5;
      mix-blend-mode:screen;
      pointer-events:none;
      z-index:-1;
    }
    .header-main{display:flex;align-items:center;gap:18px;}
    .teacher-orb{
      width:64px;height:64px;border-radius:50%;
      background:radial-gradient(circle,#ffffff 0%,#00fff0 35%,#ff2f92 70%,#02030b 100%);
      box-shadow:0 0 24px rgba(0,255,255,.7),0 0 32px rgba(255,0,160,.55);
      flex-shrink:0;
    }
    .brand-title{
      font-size:1.4rem;font-weight:700;letter-spacing:.06em;text-transform:uppercase;
      background:linear-gradient(90deg,#4ef2ff,#ff2f92);
      -webkit-background-clip:text;background-clip:text;color:transparent;
    }
    .brand-sub{color:var(--muted);font-size:.9rem;margin-top:2px;}
    .lesson-title{
      margin-top:10px;font-size:1.25rem;
      color:var(--accent-cyan);text-shadow:0 0 12px rgba(78,242,255,.5);
    }

    .controls-row{
      display:flex;flex-wrap:wrap;gap:10px;margin-top:10px;font-size:.9rem;
    }
    .small-btn{
      padding:6px 12px;border-radius:999px;
      border:1px dashed rgba(255,255,255,.35);
      background:transparent;color:#fff;cursor:pointer;
      font-size:.8rem;display:inline-flex;align-items:center;gap:6px;
      transition:all var(--transition-fast);
    }
    .small-btn:hover{
      border-color:var(--accent-cyan);
      box-shadow:0 0 16px rgba(78,242,255,.5);
      background:rgba(4,10,40,.9);
    }

    /* TABS */
    .tabs{
      display:flex;flex-wrap:wrap;gap:10px;margin:18px 0 16px;
    }
    .tab{
      padding:9px 14px;border-radius:var(--radius-md);
      background:radial-gradient(circle at top,rgba(255,255,255,.09),rgba(7,10,28,.96));
      border:1px solid rgba(130,140,200,.4);
      color:#fff;font-size:.9rem;cursor:pointer;
      display:inline-flex;align-items:center;gap:6px;
      transition:all var(--transition-fast);
    }
    .tab:hover{
      border-color:rgba(120,120,255,.6);
      box-shadow:0 0 18px rgba(120,120,255,.35);
    }
    .tab.active{
      border-color:rgba(10,220,255,.95);
      box-shadow:0 0 22px rgba(78,242,255,.7);
      background:radial-gradient(circle at top,#111633,#050716);
    }
    .tab .icon{font-size:1rem;}

    /* PANELS */
    .panel{
      display:none;
      background:var(--card-bg);
      border-radius:var(--radius-lg);
      border:1px solid rgba(120,120,255,.4);
      padding:18px 20px 20px;
      box-shadow:var(--shadow-soft);
    }
    .panel.active{display:block;}

    .sentence{
      font-size:1.1rem;margin-bottom:8px;
    }
    .sentence strong{color:var(--accent-yello);}
    .blocks-line{
      margin:8px 0 6px;
      font-family:"SF Mono","Consolas","Menlo",monospace;
      font-size:.95rem;color:var(--accent-green);
    }
    .pill-row{display:flex;flex-wrap:wrap;gap:6px;margin:10px 0 6px;}
    .pill{
      border-radius:999px;padding:4px 10px;
      border:1px solid rgba(130,140,200,.6);
      font-size:.8rem;
      background:radial-gradient(circle at top,rgba(255,255,255,.08),rgba(8,10,25,.96));
    }
    .voice-row{
      margin-top:10px;display:flex;flex-wrap:wrap;gap:10px;
      align-items:center;font-size:.9rem;color:var(--muted);
    }
    .voice-btn{
      padding:6px 10px;border-radius:999px;
      border:none;background:var(--accent-pink);
      color:#02030b;cursor:pointer;font-size:.8rem;
      display:inline-flex;align-items:center;gap:6px;
      box-shadow:0 0 14px rgba(255,47,146,.7);
      transition:all var(--transition-fast);
    }
    .voice-btn:hover{
      filter:brightness(1.1);
      box-shadow:0 0 18px rgba(255,47,146,.9);
    }

    .steps-title{
      margin-top:14px;margin-bottom:4px;
      font-size:.95rem;color:var(--accent-cyan);
    }
    .steps-list{font-size:.9rem;color:var(--muted);}
    .step-item{display:flex;gap:8px;margin-bottom:4px;}
    .step-badge{
      width:18px;height:18px;border-radius:50%;
      background:var(--accent-purple);color:#02030b;
      font-size:.75rem;display:flex;align-items:center;justify-content:center;
    }

    /* EXERCISE */
    .exercise-box{
      margin-top:16px;padding:12px 12px 14px;
      border-radius:var(--radius-md);
      background:var(--card-soft-bg);
      border:1px dashed rgba(120,120,255,.6);
    }
    .exercise-title{
      font-size:.95rem;color:var(--accent-yello);margin-bottom:6px;
    }
    .exercise-row{
      display:flex;flex-wrap:wrap;gap:8px;margin-bottom:6px;font-size:.85rem;
    }
    .exercise-row select,
    .exercise-row input{
      padding:4px 8px;border-radius:8px;border:1px solid rgba(160,160,220,.7);
      background:#050716;color:#fff;font-size:.85rem;
    }
    .exercise-row input{min-width:260px;}
    .feedback{
      margin-top:6px;font-size:.85rem;
    }

    .footer-nav{
      margin-top:14px;display:flex;justify-content:space-between;align-items:center;
    }
    .primary-btn,.secondary-btn{
      padding:8px 16px;border-radius:999px;cursor:pointer;font-size:.9rem;
      border:1px solid rgba(255,255,255,.45);background:transparent;color:#fff;
      display:inline-flex;align-items:center;gap:6px;
      transition:all var(--transition-fast);
    }
    .primary-btn{
      background:linear-gradient(90deg,#4ef2ff,#ff2f92);
      border:none;color:#02030b;font-weight:600;
      box-shadow:0 0 20px rgba(78,242,255,.6);
    }
    .primary-btn:hover{
      filter:brightness(1.05);
      box-shadow:0 0 26px rgba(78,242,255,.9);
    }
    .secondary-btn:hover{
      border-color:var(--accent-cyan);
      box-shadow:0 0 16px rgba(78,242,255,.5);
      background:rgba(4,10,40,.9);
    }

    .export-bar{
      margin-top:14px;padding:8px 10px;border-radius:var(--radius-md);
      border:1px dashed rgba(130,140,200,.5);
      background:rgba(8,12,30,.85);font-size:.85rem;
      display:flex;align-items:center;gap:10px;
    }
    .footer-meta{
      margin-top:10px;font-size:.8rem;color:var(--muted);
      text-align:right;
    }
    .footer-meta .brand{color:var(--accent-cyan);}
  </style>
</head>
<body>
<div class="app">
  <header class="neon-header">
    <div class="header-main">
      <div class="teacher-orb"></div>
      <div>
        <div class="brand-title">NEXTATION</div>
        <div class="brand-sub">Time & Place ‚Äì Subject ¬∑ Verb ¬∑ Place ¬∑ Time</div>
        <div class="lesson-title">3Ô∏è‚É£ Time & Place (Add Extra Blocks)</div>
      </div>
    </div>
  </header>

  <!-- TABS -->
  <nav class="tabs">
    <button class="tab active" data-tab="overview" onclick="showTab('overview')">
      <span class="icon">üß†</span> Overview
    </button>
    <button class="tab" data-tab="i" onclick="showTab('i')">
      <span class="icon">üè´</span> I go to school‚Ä¶
    </button>
    <button class="tab" data-tab="they" onclick="showTab('they')">
      <span class="icon">üåô</span> They study English‚Ä¶
    </button>
    <button class="tab" data-tab="he" onclick="showTab('he')">
      <span class="icon">‚öΩ</span> He plays football‚Ä¶
    </button>
  </nav>

  <main>
    <!-- OVERVIEW + EXERCISE -->
    <section id="panel-overview" class="panel active">
      <div class="sentence">
        We always think in <strong>blocks</strong>: Subject ‚Üí Verb ‚Üí Place ‚Üí Time.  
        Em portugu√™s: Sujeito ‚Üí Verbo ‚Üí Lugar ‚Üí Tempo.
      </div>
      <p style="font-size:.9rem;color:var(--muted);margin-bottom:10px;">
        Imagine que voc√™ est√° explicando sua rotina pra um gringo. Se voc√™ falar fora dessa ordem,
        ele trava. Ent√£o a gente treina sempre nessa sequ√™ncia, at√© ficar autom√°tico. √â nosso. üòâ
      </p>

      <div class="exercise-box">
        <div class="exercise-title">üìù Exercise ‚Äì Monte a frase na ordem certa</div>
        <p style="font-size:.85rem;margin-bottom:6px;">
          1) Escolha os blocos. 2) Escreva a frase completa em ingl√™s. 3) Clique em ‚ÄúCheck‚Äù.
        </p>
        <div class="exercise-row">
          <label>Subject:
            <select id="ex-subject">
              <option value="">--</option>
              <option value="I">I</option>
              <option value="They">They</option>
              <option value="He">He</option>
            </select>
          </label>
          <label>Verb:
            <select id="ex-verb">
              <option value="">--</option>
              <option value="go">go</option>
              <option value="study">study</option>
              <option value="play">play</option>
            </select>
          </label>
          <label>Place:
            <select id="ex-place">
              <option value="">--</option>
              <option value="to school">to school</option>
              <option value="English">English</option>
              <option value="football">football</option>
            </select>
          </label>
          <label>Time:
            <select id="ex-time">
              <option value="">--</option>
              <option value="every day">every day</option>
              <option value="at night">at night</option>
              <option value="on Sundays">on Sundays</option>
            </select>
          </label>
        </div>

        <div class="exercise-row">
          <label style="flex:1;">Write the sentence:
            <input id="ex-sentence" type="text" placeholder="Ex: I go to school every day.">
          </label>
        </div>
        <button class="small-btn" onclick="checkExercise()">‚úÖ Check</button>
        <div id="ex-feedback" class="feedback"></div>
      </div>
    </section>

    <!-- I GO TO SCHOOL -->
    <section id="panel-i" class="panel">
      <div class="sentence">
        <strong>Sentence:</strong> I go to school every day.
      </div>
      <div class="blocks-line">
        Blocks: I | go | to school | every day
      </div>
      <p>Portuguese: <strong>Eu vou para a escola todos os dias.</strong></p>

      <div class="pill-row">
        <div class="pill"><strong>Subject</strong> ‚Üí <code>I</code></div>
        <div class="pill"><strong>Verb</strong> ‚Üí <code>go</code></div>
        <div class="pill"><strong>Place</strong> ‚Üí <code>to school</code></div>
        <div class="pill"><strong>Time</strong> ‚Üí <code>every day</code></div>
      </div>

      <div class="voice-row">
        <button class="voice-btn" onclick="speak('I go to school every day.')">üîä Play</button>
        <span>Imagina voc√™ explicando sua rotina pra um americano: 
          <em>I go to school every day.</em> ‚Äì simples, direto.</span>
      </div>

      <h3 class="steps-title">Walkthrough</h3>
      <div class="steps-list">
        <div class="step-item"><div class="step-badge">1</div><div><strong>I</strong> ‚Üí voc√™ mesmo, ‚Äúeu‚Äù.</div></div>
        <div class="step-item"><div class="step-badge">2</div><div><strong>go</strong> ‚Üí ir, movimento.</div></div>
        <div class="step-item"><div class="step-badge">3</div><div><strong>to school</strong> ‚Üí lugar para onde voc√™ vai.</div></div>
        <div class="step-item"><div class="step-badge">4</div><div><strong>every day</strong> ‚Üí quando: frequ√™ncia di√°ria.</div></div>
      </div>
    </section>

    <!-- THEY STUDY ENGLISH -->
    <section id="panel-they" class="panel">
      <div class="sentence">
        <strong>Sentence:</strong> They study English at night.
      </div>
      <div class="blocks-line">
        Blocks: They | study | English | at night
      </div>
      <p>Portuguese: <strong>Eles estudam ingl√™s √† noite.</strong></p>

      <div class="pill-row">
        <div class="pill"><strong>Subject</strong> ‚Üí <code>They</code></div>
        <div class="pill"><strong>Verb</strong> ‚Üí <code>study</code></div>
        <div class="pill"><strong>Place</strong> ‚Üí <code>English</code> (a mat√©ria / idioma)</div>
        <div class="pill"><strong>Time</strong> ‚Üí <code>at night</code></div>
      </div>

      <div class="voice-row">
        <button class="voice-btn" onclick="speak('They study English at night.')">üîä Play</button>
        <span>Imagina um grupo fazendo cursinho noturno: 
          <em>They study English at night.</em></span>
      </div>

      <h3 class="steps-title">Walkthrough</h3>
      <div class="steps-list">
        <div class="step-item"><div class="step-badge">1</div><div><strong>They</strong> ‚Üí eles / elas, um grupo.</div></div>
        <div class="step-item"><div class="step-badge">2</div><div><strong>study</strong> ‚Üí verbo ‚Äúestudar‚Äù.</div></div>
        <div class="step-item"><div class="step-badge">3</div><div><strong>English</strong> ‚Üí o que eles estudam.</div></div>
        <div class="step-item"><div class="step-badge">4</div><div><strong>at night</strong> ‚Üí quando: √† noite.</div></div>
      </div>
    </section>

    <!-- HE PLAYS FOOTBALL -->
    <section id="panel-he" class="panel">
      <div class="sentence">
        <strong>Sentence:</strong> He plays football on Sundays.
      </div>
      <div class="blocks-line">
        Blocks: He | plays | football | on Sundays
      </div>
      <p>Portuguese: <strong>Ele joga futebol aos domingos.</strong></p>

      <div class="pill-row">
        <div class="pill"><strong>Subject</strong> ‚Üí <code>He</code></div>
        <div class="pill"><strong>Verb</strong> ‚Üí <code>plays</code></div>
        <div class="pill"><strong>Place</strong> ‚Üí <code>football</code> (atividade)</div>
        <div class="pill"><strong>Time</strong> ‚Üí <code>on Sundays</code></div>
      </div>

      <div class="voice-row">
        <button class="voice-btn" onclick="speak('He plays football on Sundays.')">üîä Play</button>
        <span>Imagina o amigo da pelada de domingo. Domingo √© dia de futebol. ‚öΩ</span>
      </div>

      <h3 class="steps-title">Walkthrough</h3>
      <div class="steps-list">
        <div class="step-item"><div class="step-badge">1</div><div><strong>He</strong> ‚Üí ele, um cara espec√≠fico.</div></div>
        <div class="step-item"><div class="step-badge">2</div><div><strong>plays</strong> ‚Üí <code>play</code> + <strong>s</strong> porque √© <strong>he</strong> (3¬™ pessoa).</div></div>
        <div class="step-item"><div class="step-badge">3</div><div><strong>football</strong> ‚Üí esporte que ele pratica.</div></div>
        <div class="step-item"><div class="step-badge">4</div><div><strong>on Sundays</strong> ‚Üí tempo: aos domingos.</div></div>
      </div>
    </section>
  </main>

  <div class="footer-nav">
    <button class="secondary-btn" onclick="prevTab()">‚¨ÖÔ∏è Back</button>
    <button class="primary-btn" onclick="nextTab()">Next ‚û°Ô∏è</button>
  </div>

  <div class="export-bar">
    <span>üìã Copiar para planilha:</span>
    <button class="small-btn" onclick="copyToSpreadsheet()">Copiar conte√∫do</button>
  </div>

  <footer class="footer-meta">
    <span class="brand">NEXTATION</span> ¬∑ Time & Place em blocos. √â nosso. üöÄ
  </footer>
</div>

<script>
  const tabOrder = ['overview','i','they','he'];

  function showTab(id){
    const panels = document.querySelectorAll('.panel');
    for(let i=0;i<panels.length;i++){
      const p = panels[i];
      p.classList.toggle('active', p.id === 'panel-' + id);
    }

    const tabs = document.querySelectorAll('.tab');
    for(let i=0;i<tabs.length;i++){
      const t = tabs[i];
      t.classList.toggle('active', t.dataset.tab === id);
    }
  }

  function nextTab(){
    const activeTab = document.querySelector('.tab.active');
    if(!activeTab) return;
    const current = activeTab.dataset.tab;
    const idx = tabOrder.indexOf(current);
    if(idx >= 0 && idx < tabOrder.length - 1){
      showTab(tabOrder[idx+1]);
    }
  }

  function prevTab(){
    const activeTab = document.querySelector('.tab.active');
    if(!activeTab) return;
    const current = activeTab.dataset.tab;
    const idx = tabOrder.indexOf(current);
    if(idx > 0){
      showTab(tabOrder[idx-1]);
    }
  }

  function speak(text){
    if(!('speechSynthesis' in window)){
      alert('SpeechSynthesis not supported in this browser.');
      return;
    }
    window.speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(text);
    u.lang = 'en-US';
    u.rate = 0.98;
    u.pitch = 1.0;
    window.speechSynthesis.speak(u);
  }

  function applyVerbS(subject, verb){
    const s = subject.toLowerCase();
    if(s === 'he' || s === 'she' || s === 'it'){
      if(verb === 'go') return 'goes';
      return verb + 's';
    }
    return verb;
  }

  function normalize(str){
    if(!str) return '';
    // NO REGEX ‚Äì only simple operations
    let out = str.toLowerCase();
    out = out.replace('.', '');     // remove ponto final
    out = out.replace('  ', ' ');   // colapsa espa√ßo duplo (uma vez)
    out = out.replace('  ', ' ');   // repete para garantir
    out = out.trim();
    return out;
  }

  function checkExercise(){
    const subj = document.getElementById('ex-subject').value;
    const verb = document.getElementById('ex-verb').value;
    const place = document.getElementById('ex-place').value;
    const time  = document.getElementById('ex-time').value;
    const sentence = document.getElementById('ex-sentence').value;
    const feedback = document.getElementById('ex-feedback');

    if(!subj || !verb || !place || !time){
      feedback.textContent = 'Escolha Subject, Verb, Place e Time.';
      feedback.style.color = '#ffe25f';
      return;
    }
    if(!sentence || !sentence.trim()){
      feedback.textContent = 'Agora escreve a frase completa em ingl√™s.';
      feedback.style.color = '#ffe25f';
      return;
    }

    const verbForm = applyVerbS(subj, verb);
    const target = subj + ' ' + verbForm + ' ' + place + ' ' + time + '.';

    const userNorm = normalize(sentence);
    const targetNorm = normalize(target);

    if(userNorm === targetNorm){
      feedback.textContent = 'Perfeito! "' + target + '" ‚Äì Subject ‚Üí Verb ‚Üí Place ‚Üí Time.';
      feedback.style.color = '#4dff9b';
    }else{
      feedback.textContent = 'Quase. Modelo esperado: ' + target;
      feedback.style.color = '#ff8aa8';
    }
  }

  function copyToSpreadsheet(){
    const panels = document.querySelectorAll('.panel');
    let text = '';
    for(let i=0;i<panels.length;i++){
      if(i>0) text += '\n\n-----------------------------\n\n';
      text += panels[i].innerText.trim();
    }
    if(!navigator.clipboard){
      alert('Seu navegador n√£o permite copiar automaticamente. Copie manualmente.');
      return;
    }
    navigator.clipboard.writeText(text)
      .then(function(){ alert('Conte√∫do copiado. Cole (Ctrl+V) na planilha.'); })
      .catch(function(){ alert('Copie manualmente (Ctrl+C).'); });
  }
</script>
</body>
</html>
