<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>NEXTATION ‚Äì Time & Place Blocks (Subject ¬∑ Verb ¬∑ Place ¬∑ Time)</title>
  <style>
    :root {
      /* NEXTATION WEBSITE ‚Äî COLOUR SYSTEM */
      --bg-main: #02030b;
      --bg-gradient: radial-gradient(circle at top, #1c1f3b 0%, #050716 45%, #02030b 100%);
      /* Surfaces / Cards */
      --card-bg: rgba(15, 18, 40, 0.92);
      --card-soft-bg: rgba(18, 21, 50, 0.88);
      /* Neon accents */
      --accent-cyan: #4ef2ff;
      --accent-pink: #ff2f92;
      --accent-green: #4dff9b;
      --accent-yello: #ffe25f;
      --accent-purple: #aa5dff;
      /* Text and borders */
      --muted: rgba(255,255,255,0.65);
      --border-glow: rgba(120,120,255,0.45);
      /* Shadows */
      --shadow-strong: 0 0 36px rgba(130,80,255,0.6);
      --shadow-soft: 0 0 20px rgba(0,0,0,0.65);
      /* Radii and transitions */
      --radius-lg: 22px;
      --radius-md: 16px;
      --radius-sm: 10px;
      --transition-fast: 0.18s ease-out;
      --transition-med: 0.28s ease-out;
    }

    *{box-sizing:border-box;margin:0;padding:0;}
    body{
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      background:var(--bg-gradient);
      color:#fff;
      min-height:100vh;
      padding:24px;
      display:flex;
      justify-content:center;
    }
    .app{max-width:1100px;width:100%;}

    /* HEADER */
    .neon-header{
      position:relative;
      padding:18px 22px 14px;
      border-radius:var(--radius-lg);
      background:rgba(3,5,20,0.9);
      box-shadow:var(--shadow-soft);
      border:1px solid var(--border-glow);
      margin-bottom:20px;
      overflow:hidden;
    }
    .neon-header::before{
      content:"";
      position:absolute;
      inset:-1px;
      background:linear-gradient(90deg,#00f5ff,#ff2f92,#ffe25f,#4dff9b);
      opacity:0.5;
      mix-blend-mode:screen;
      pointer-events:none;
      z-index:-1;
    }
    .header-main{
      display:flex;
      align-items:center;
      gap:18px;
    }
    .teacher-orb{
      width:64px;
      height:64px;
      border-radius:50%;
      background:radial-gradient(circle,#ffffff 0%,#00fff0 35%,#ff2f92 70%,#02030b 100%);
      box-shadow:0 0 24px rgba(0,255,255,0.7),0 0 32px rgba(255,0,160,0.55);
      flex-shrink:0;
    }
    .brand-title{
      font-size:1.4rem;
      background:linear-gradient(90deg,#4ef2ff,#ff2f92);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      font-weight:700;
      letter-spacing:0.06em;
      text-transform:uppercase;
    }
    .brand-sub{
      color:var(--muted);
      font-size:0.9rem;
      margin-top:2px;
    }
    .lesson-title{
      margin-top:10px;
      font-size:1.25rem;
      color:var(--accent-cyan);
      text-shadow:0 0 12px rgba(78,242,255,0.5);
    }
    .controls-row{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top:10px;
      font-size:0.9rem;
    }
    .small-btn{
      padding:6px 12px;
      border-radius:999px;
      border:1px dashed rgba(255,255,255,0.35);
      background:transparent;
      color:#fff;
      cursor:pointer;
      font-size:0.8rem;
      display:inline-flex;
      align-items:center;
      gap:6px;
      transition:transform var(--transition-fast),box-shadow var(--transition-fast),border-color var(--transition-fast),background var(--transition-fast);
    }
    .small-btn:hover{
      transform:scale(1.03);
      border-color:var(--accent-cyan);
      box-shadow:0 0 16px rgba(78,242,255,0.5);
      background:rgba(4,10,40,0.9);
    }

    /* TABS */
    .tabs{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin:18px 0 16px;
    }
    .tab{
      position:relative;
      padding:9px 14px;
      border-radius:var(--radius-md);
      background:radial-gradient(circle at top,rgba(255,255,255,0.09),rgba(7,10,28,0.96));
      border:1px solid rgba(130,140,200,0.4);
      color:#fff;
      font-size:0.9rem;
      cursor:pointer;
      transition:all var(--transition-fast);
    }
    .tab span.icon{margin-right:6px;}
    .tab:hover{
      border-color:rgba(120,120,255,0.6);
      box-shadow:0 0 20px rgba(120,120,255,0.35);
    }
    .tab.active{
      background:radial-gradient(circle at top,rgba(255,255,255,0.15),rgba(21,13,51,0.98));
      border-color:rgba(103,255,196,0.9);
      box-shadow:0 0 24px rgba(79,255,204,0.55);
    }
    .tab.completed::after{
      content:"‚úì";
      position:absolute;
      top:-6px;
      right:-6px;
      width:18px;
      height:18px;
      border-radius:50%;
      background:var(--accent-green);
      color:#02030b;
      font-size:0.7rem;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:0 0 10px rgba(77,255,179,0.9);
    }

    /* CARD */
    .card{
      position:relative;
      border-radius:var(--radius-lg);
      background:linear-gradient(135deg, rgba(13,16,40,0.98), rgba(6,8,26,0.98));
      padding:20px 22px 22px;
      border:1px solid rgba(120,120,255,0.32);
      box-shadow:var(--shadow-soft);
      overflow:hidden;
      min-height:260px;
    }
    .card::before{
      content:"";
      position:absolute;
      top:-40%;
      left:-20%;
      width:280px;
      height:280px;
      background:radial-gradient(circle at top left, rgba(87,57,255,0.35), transparent 58%);
      pointer-events:none;
    }
    .card-inner{position:relative;z-index:1;}

    h2.section-title{
      font-size:1.1rem;
      color:var(--accent-cyan);
      margin-bottom:6px;
    }
    p.section-sub{
      font-size:0.92rem;
      color:var(--muted);
      margin-bottom:12px;
      line-height:1.45;
    }
    .pill-tag{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.18);
      font-size:0.75rem;
      color:var(--muted);
      margin-right:6px;
      margin-bottom:6px;
    }
    .pill-tag span.dot{
      width:7px;
      height:7px;
      border-radius:50%;
      background:var(--accent-cyan);
    }

    /* Blocks */
    .block-row{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin:10px 0 14px;
    }
    .block{
      background:var(--card-soft-bg);
      border-radius:var(--radius-md);
      padding:8px 10px;
      border:1px solid rgba(165,170,255,0.45);
      min-width:90px;
      text-align:center;
      box-shadow:0 0 12px rgba(40,80,255,0.35);
    }
    .block-label{
      display:block;
      font-size:0.7rem;
      color:var(--muted);
      margin-bottom:4px;
      text-transform:uppercase;
      letter-spacing:0.06em;
    }
    .block-value{
      font-size:0.96rem;
      font-weight:600;
    }

    .example-en{
      font-size:1rem;
      margin-bottom:4px;
    }
    .example-pt{
      font-size:0.9rem;
      color:var(--muted);
      margin-bottom:10px;
    }
    .tip-box{
      border-left:3px solid var(--accent-yello);
      padding-left:10px;
      margin:8px 0 10px;
      font-size:0.9rem;
      color:var(--muted);
    }
    .play-btn{
      margin-top:6px;
      padding:6px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.3);
      background:rgba(12,14,36,0.9);
      color:#fff;
      cursor:pointer;
      font-size:0.8rem;
      display:inline-flex;
      align-items:center;
      gap:6px;
      transition:all var(--transition-fast);
    }
    .play-btn:hover{
      border-color:var(--accent-pink);
      box-shadow:0 0 16px rgba(255,47,146,0.6);
      transform:translateY(-1px);
    }

    /* Practice */
    .practice-select,.practice-input{
      margin:4px 0 10px;
      background:rgba(5,8,28,0.9);
      border-radius:var(--radius-md);
      border:1px solid rgba(150,150,255,0.5);
      color:#fff;
      padding:6px 10px;
      font-size:0.9rem;
      width:100%;
    }
    .practice-select:focus,.practice-input:focus{
      outline:none;
      border-color:var(--accent-cyan);
      box-shadow:0 0 16px rgba(78,242,255,0.5);
    }
    .feedback{
      margin-top:6px;
      font-size:0.9rem;
      min-height:18px;
    }

    .footer-nav{
      display:flex;
      justify-content:space-between;
      gap:10px;
      margin-top:18px;
    }
    .primary-btn,.secondary-btn{
      flex:1;
      padding:10px 14px;
      border-radius:var(--radius-md);
      border:1px solid rgba(255,255,255,0.25);
      font-size:0.9rem;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      transition:all var(--transition-fast);
    }
    .primary-btn{
      background:linear-gradient(135deg,#ff2f92,#4ef2ff);
      color:#02030b;
      font-weight:600;
      box-shadow:0 0 18px rgba(255,47,146,0.55);
    }
    .primary-btn:hover{
      transform:translateY(-1px) scale(1.01);
      box-shadow:0 0 24px rgba(255,47,146,0.8);
    }
    .secondary-btn{
      background:rgba(10,12,30,0.96);
      color:#fff;
    }
    .secondary-btn:hover{
      border-color:var(--accent-cyan);
      box-shadow:0 0 14px rgba(78,242,255,0.5);
      transform:translateY(-1px);
    }

    .export-bar{
      margin-top:16px;
      font-size:0.85rem;
      color:var(--muted);
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      align-items:center;
    }
    .footer-meta{
      margin-top:12px;
      font-size:0.8rem;
      color:var(--muted);
      text-align:right;
    }
    .brand{
      color:var(--accent-cyan);
      font-weight:600;
    }
  </style>
</head>
<body>
<div class="app">
  <header class="neon-header">
    <div class="header-main">
      <div class="teacher-orb"></div>
      <div>
        <div class="brand-title">NEXTATION</div>
        <div class="brand-sub">Time & Place Blocks ‚Äì Subject ¬∑ Verb ¬∑ Place ¬∑ Time (ADHD‚Äëfriendly)</div>
        <div class="lesson-title">
          3Ô∏è‚É£ Time & Place ‚Äì ‚Äúcola visual‚Äù: S  ‚Üí V  ‚Üí Place  ‚Üí Time
        </div>
      </div>
    </div>
    <div class="controls-row">
      <button class="small-btn" onclick="window.print()">üìÑ Exportar em PDF</button>
      <span style="font-size:0.8rem;color:var(--muted);">
        Dica: imagine sua frase em blocos. √â nosso: um bloco de cada vez.
      </span>
    </div>
  </header>

  <nav class="tabs" aria-label="Sentence tabs">
    <button class="tab active" data-tab="overview" onclick="showTab('overview')">
      <span class="icon">üß†</span>Overview
    </button>
    <button class="tab" data-tab="school" onclick="showTab('school')">
      <span class="icon">üè´</span>I go to school every day
    </button>
    <button class="tab" data-tab="office" onclick="showTab('office')">
      <span class="icon">üíº</span>She works at the office
    </button>
    <button class="tab" data-tab="lunch" onclick="showTab('lunch')">
      <span class="icon">üçΩÔ∏è</span>We have lunch at 1 pm
    </button>
    <button class="tab" data-tab="study-night" onclick="showTab('study-night')">
      <span class="icon">üåô</span>They study English at night
    </button>
    <button class="tab" data-tab="football" onclick="showTab('football')">
      <span class="icon">‚öΩ</span>He plays football on Sundays
    </button>
    <button class="tab" data-tab="practice" onclick="showTab('practice')">
      <span class="icon">üß™</span>Practice
    </button>
  </nav>

  <main class="card">
    <!-- OVERVIEW -->
    <section id="tab-overview" class="card-inner">
      <h2 class="section-title">How to add Time & Place to your sentence</h2>
      <p class="section-sub">
        For ADHD brains, we keep one simple **linha do tempo**:
        <strong>Subject ‚Üí Verb ‚Üí Place ‚Üí Time</strong> (most of the time).
      </p>

      <div class="block-row">
        <div class="block">
          <span class="block-label">Subject</span>
          <span class="block-value">I / You / He / She / We / They</span>
        </div>
        <div class="block">
          <span class="block-label">Verb</span>
          <span class="block-value">go, work, have, study, play...</span>
        </div>
        <div class="block">
          <span class="block-label">Place</span>
          <span class="block-value">to school, at the office...</span>
        </div>
        <div class="block">
          <span class="block-label">Time</span>
          <span class="block-value">every day, at 1 pm, at night...</span>
        </div>
      </div>

      <p class="example-en"><strong>I go to school every day.</strong></p>
      <p class="example-pt">Eu vou para a escola todos os dias.</p>

      <div class="tip-box">
        <strong>Tip (cola mental):</strong> pensa em 4 caixinhas na sua cabe√ßa:
        <br>1) Quem? 2) Faz o qu√™? 3) Onde? 4) Quando?
        <br>Se n√£o lembrar da regra ‚Äúperfeita‚Äù, usa essa sequ√™ncia b√°sica. Vai funcionar em 99% dos casos simples.
      </div>

      <button class="play-btn" onclick="speak('I go to school every day.')">
        üîä Play ‚Äì I go to school every day
      </button>
    </section>

    <!-- I GO TO SCHOOL EVERY DAY -->
    <section id="tab-school" class="card-inner" style="display:none;">
      <h2 class="section-title">Sentence 1 ‚Äì I go to school every day</h2>
      <p class="section-sub">
        Portugu√™s: <em>Eu vou para a escola todos os dias.</em><br>
        Aqui voc√™ v√™ **lugar + tempo** juntos, bem claro.
      </p>

      <div class="block-row">
        <div class="block">
          <span class="block-label">Subject</span>
          <span class="block-value">I</span>
        </div>
        <div class="block">
          <span class="block-label">Verb</span>
          <span class="block-value">go</span>
        </div>
        <div class="block">
          <span class="block-label">Place</span>
          <span class="block-value">to school</span>
        </div>
        <div class="block">
          <span class="block-label">Time</span>
          <span class="block-value">every day</span>
        </div>
      </div>

      <p class="example-en"><strong>I go to school every day.</strong></p>
      <p class="example-pt">Eu vou para a escola todos os dias.</p>

      <div class="tip-box">
        <strong>Tip:</strong> Adverbs like <em>every day, usually, sometimes</em> usually come at the end:
        <br><strong>I go to school every day.</strong>
      </div>

      <button class="play-btn" onclick="speak('I go to school every day.')">
        üîä Play ‚Äì I go to school every day
      </button>
    </section>

    <!-- SHE WORKS AT THE OFFICE -->
    <section id="tab-office" class="card-inner" style="display:none;">
      <h2 class="section-title">Sentence 2 ‚Äì She works at the office</h2>
      <p class="section-sub">
        Portugu√™s: <em>Ela trabalha no escrit√≥rio.</em><br>
        Aqui focamos em **lugar**. Tempo pode aparecer depois se voc√™ quiser.
      </p>

      <div class="block-row">
        <div class="block">
          <span class="block-label">Subject</span>
          <span class="block-value">She</span>
        </div>
        <div class="block">
          <span class="block-label">Verb</span>
          <span class="block-value">works</span>
        </div>
        <div class="block">
          <span class="block-label">Place</span>
          <span class="block-value">at the office</span>
        </div>
      </div>

      <p class="example-en"><strong>She works at the office.</strong></p>
      <p class="example-pt">Ela trabalha no escrit√≥rio.</p>

      <div class="tip-box">
        <strong>Tip:</strong> He / She / It ‚Üí verb with <strong>-s</strong>:
        <br><strong>She work<strong>s</strong> at the office.</strong>
      </div>

      <button class="play-btn" onclick="speak('She works at the office.')">
        üîä Play ‚Äì She works at the office
      </button>
    </section>

    <!-- WE HAVE LUNCH AT 1 PM -->
    <section id="tab-lunch" class="card-inner" style="display:none;">
      <h2 class="section-title">Sentence 3 ‚Äì We have lunch at 1 pm</h2>
      <p class="section-sub">
        Portugu√™s: <em>N√≥s almo√ßamos √† 1 hora.</em><br>
        Aqui √© uma frase de **tempo espec√≠fico**.
      </p>

      <div class="block-row">
        <div class="block">
          <span class="block-label">Subject</span>
          <span class="block-value">We</span>
        </div>
        <div class="block">
          <span class="block-label">Verb</span>
          <span class="block-value">have lunch</span>
        </div>
        <div class="block">
          <span class="block-label">Time</span>
          <span class="block-value">at 1 pm</span>
        </div>
      </div>

      <p class="example-en"><strong>We have lunch at 1 pm.</strong></p>
      <p class="example-pt">N√≥s almo√ßamos √† 1 hora.</p>

      <div class="tip-box">
        <strong>Tip:</strong> Hor√°rio ‚Üí normalmente com <strong>at</strong>:
        <br><strong>at 1 pm, at 7:30, at midnight</strong>.
      </div>

      <button class="play-btn" onclick="speak('We have lunch at 1 pm.')">
        üîä Play ‚Äì We have lunch at 1 pm
      </button>
    </section>

    <!-- THEY STUDY ENGLISH AT NIGHT -->
    <section id="tab-study-night" class="card-inner" style="display:none;">
      <h2 class="section-title">Sentence 4 ‚Äì They study English at night</h2>
      <p class="section-sub">
        Portugu√™s: <em>Eles estudam ingl√™s √† noite.</em><br>
        Lugar + tempo; rotina t√≠pica de quem trabalha de dia e estuda √† noite.
      </p>

      <div class="block-row">
        <div class="block">
          <span class="block-label">Subject</span>
          <span class="block-value">They</span>
        </div>
        <div class="block">
          <span class="block-label">Verb</span>
          <span class="block-value">study</span>
        </div>
        <div class="block">
          <span class="block-label">Object / Place</span>
          <span class="block-value">English</span>
        </div>
        <div class="block">
          <span class="block-label">Time</span>
          <span class="block-value">at night</span>
        </div>
      </div>

      <p class="example-en"><strong>They study English at night.</strong></p>
      <p class="example-pt">Eles estudam ingl√™s √† noite.</p>

      <div class="tip-box">
        <strong>Tip:</strong> Partes do dia ‚Üí normalmente com <strong>in / at</strong>:
        <br><strong>in the morning, in the afternoon, at night</strong>.
      </div>

      <button class="play-btn" onclick="speak('They study English at night.')">
        üîä Play ‚Äì They study English at night
      </button>
    </section>

    <!-- HE PLAYS FOOTBALL ON SUNDAYS -->
    <section id="tab-football" class="card-inner" style="display:none;">
      <h2 class="section-title">Sentence 5 ‚Äì He plays football on Sundays</h2>
      <p class="section-sub">
        Portugu√™s: <em>Ele joga futebol aos domingos.</em><br>
        Aqui √© rotina + dia da semana.
      </p>

      <div class="block-row">
        <div class="block">
          <span class="block-label">Subject</span>
          <span class="block-value">He</span>
        </div>
        <div class="block">
          <span class="block-label">Verb</span>
          <span class="block-value">plays</span>
        </div>
        <div class="block">
          <span class="block-label">Object</span>
          <span class="block-value">football</span>
        </div>
        <div class="block">
          <span class="block-label">Time</span>
          <span class="block-value">on Sundays</span>
        </div>
      </div>

      <p class="example-en"><strong>He plays football on Sundays.</strong></p>
      <p class="example-pt">Ele joga futebol aos domingos.</p>

      <div class="tip-box">
        <strong>Tip:</strong> Dias da semana ‚Üí <strong>on</strong>:
        <br><strong>on Monday, on Friday, on Sundays</strong>.
      </div>

      <button class="play-btn" onclick="speak('He plays football on Sundays.')">
        üîä Play ‚Äì He plays football on Sundays
      </button>
    </section>

    <!-- PRACTICE -->
    <section id="tab-practice" class="card-inner" style="display:none;">
      <h2 class="section-title">Practice ‚Äì Build your own Time & Place sentence</h2>
      <p class="section-sub">
        Agora √© voc√™: escolha cada bloco e depois escreva a frase completa.
        Pensa sempre: <strong>Subject ‚Üí Verb ‚Üí Place ‚Üí Time</strong>.
      </p>

      <div class="pill-tag">
        <span class="dot"></span>1. Subject (quem?)
      </div>
      <select id="p-subject" class="practice-select">
        <option value="">-- choose subject --</option>
        <option value="I">I</option>
        <option value="You">You</option>
        <option value="He">He</option>
        <option value="She">She</option>
        <option value="We">We</option>
        <option value="They">They</option>
      </select>

      <div class="pill-tag">
        <span class="dot"></span>2. Verb (a√ß√£o ‚Äì base form)
      </div>
      <select id="p-verb" class="practice-select">
        <option value="">-- choose verb --</option>
        <option value="go">go</option>
        <option value="work">work</option>
        <option value="have lunch">have lunch</option>
        <option value="study">study</option>
        <option value="play">play</option>
      </select>

      <div class="pill-tag">
        <span class="dot"></span>3. Place (onde?)
      </div>
      <select id="p-place" class="practice-select">
        <option value="">-- choose place --</option>
        <option value="to school">to school</option>
        <option value="at the office">at the office</option>
        <option value="at home">at home</option>
        <option value="at the gym">at the gym</option>
        <option value="">(no place)</option>
      </select>

      <div class="pill-tag">
        <span class="dot"></span>4. Time (quando?)
      </div>
      <select id="p-time" class="practice-select">
        <option value="">-- choose time --</option>
        <option value="every day">every day</option>
        <option value="on Mondays">on Mondays</option>
        <option value="at 7 pm">at 7 pm</option>
        <option value="at night">at night</option>
        <option value="">(no time)</option>
      </select>

      <p class="section-sub">
        Agora escreva sua frase completa aqui embaixo.  
        Lembre: He / She / It ‚Üí verbo com <strong>-s</strong> (works, plays, goes).
      </p>
      <input id="p-sentence" class="practice-input" placeholder="Ex.: She works at the office.">

      <button class="primary-btn" onclick="checkPractice()">‚úÖ Check my sentence</button>
      <div id="p-feedback" class="feedback"></div>

      <p class="section-sub" style="margin-top:10px;">
        Quando ficar verde, repete 3 vezes em voz alta.  
        Ideia: treinar o c√©rebro a seguir sempre a linha: S ‚Üí V ‚Üí Place ‚Üí Time.
      </p>
    </section>
  </main>

  <div class="footer-nav">
    <button class="secondary-btn" onclick="prevTab()">‚¨ÖÔ∏è Back</button>
    <button class="primary-btn" onclick="nextTab()">Next ‚û°Ô∏è</button>
  </div>

  <div class="export-bar">
    <span>üìã Copy to spreadsheet:</span>
    <button class="small-btn" onclick="copyToSpreadsheet()">Copy lesson text</button>
    <span>‚Ä¢ üìÑ PDF: use ‚ÄúExportar em PDF‚Äù no topo (print do navegador).</span>
  </div>

  <footer class="footer-meta">
    Made for <span class="brand">NEXTATION</span> ‚Äì Time & Place in glowing blocks, do jeito que o brasileiro pensa. üöÄ
  </footer>
</div>

<script>
  const tabOrder = ['overview','school','office','lunch','study-night','football','practice'];

  function showTab(id){
    document.querySelectorAll('.card-inner').forEach(el => el.style.display='none');
    const target = document.getElementById('tab-'+id);
    if(target) target.style.display='block';
    document.querySelectorAll('.tab').forEach(t=>{
      const isActive = t.dataset.tab === id;
      t.classList.toggle('active', isActive);
      if(isActive) t.classList.add('completed');
      t.setAttribute('aria-selected', isActive ? 'true' : 'false');
    });
  }

  function nextTab(){
    const active = document.querySelector('.tab.active');
    if(!active) return;
    const current = active.getAttribute('data-tab');
    const idx = tabOrder.indexOf(current);
    if(idx < tabOrder.length-1) showTab(tabOrder[idx+1]);
  }

  function prevTab(){
    const active = document.querySelector('.tab.active');
    if(!active) return;
    const current = active.getAttribute('data-tab');
    const idx = tabOrder.indexOf(current);
    if(idx > 0) showTab(tabOrder[idx-1]);
  }

  function speak(text){
    if(!('speechSynthesis' in window)){
      alert('Your browser does not support SpeechSynthesis audio.');
      return;
    }
    window.speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(text);
    u.lang = 'en-US';
    u.rate = 0.98;
    u.pitch = 1.0;
    window.speechSynthesis.speak(u);
  }

  function applyVerbS(subject, verb){
    const s = subject.toLowerCase();
    if(s === 'he' || s === 'she' || s === 'it'){
      if(verb === 'have lunch') return 'has lunch';
      if(verb === 'go') return 'goes';
      if(verb.endsWith('y') && !/[aeiou]y
$
/.test(verb)){
        return verb.slice(0,-1) + 'ies';
      }
      if(verb.endsWith('s') || verb.endsWith('sh') || verb.endsWith('ch') || verb.endsWith('x') || verb.endsWith('o')){
        return verb + 'es';
      }
      return verb + 's';
    }
    return verb;
  }

  function normalize(str){
    return str
      .toLowerCase()
      .replace(/‚Äô/g,"'")
      .replace(/\s+/g,' ')
      .trim();
  }

  function checkPractice(){
    const subj = document.getElementById('p-subject').value;
    const verb = document.getElementById('p-verb').value;
    const place = document.getElementById('p-place').value;
    const time = document.getElementById('p-time').value;
    const sentenceInput = document.getElementById('p-sentence').value;
    const feedback = document.getElementById('p-feedback');

    if(!subj || !verb){
      feedback.textContent = 'First choose subject and verb. Primeiro escolhe sujeito e verbo.';
      feedback.style.color = '#ffe25f';
      return;
    }
    if(!sentenceInput.trim()){
      feedback.textContent = 'Now write your full sentence in the box. Agora escreve sua frase completa.';
      feedback.style.color = '#ffe25f';
      return;
    }

    const verbForm = applyVerbS(subj, verb);
    let parts = [subj, verbForm];
    if(place) parts.push(place);
    if(time) parts.push(time);
    const target = parts.join(' ') + '.';

    const user = normalize(sentenceInput.replace(/\.+
$
/,'') + '.');
    const normTarget = normalize(target);

    if(user === normTarget){
      feedback.textContent = `Perfect! "${target}" ‚Äì Subject ‚Üí Verb ‚Üí Place ‚Üí Time. Uma vez por todas ‚úÖ`;
      feedback.style.color = '#4dff9b';
    }else{
      feedback.textContent = `Not yet. Think: ${target}  (confere ordem: S, V, lugar, tempo).`;
      feedback.style.color = '#ff8aa8';
    }
  }

  function copyToSpreadsheet(){
    const text = collectLessonText();
    if(!navigator.clipboard){
      alert('Your browser does not allow automatic copying. Please select and copy manually.');
      return;
    }
    navigator.clipboard.writeText(text).then(()=>{
      alert('Lesson content copied! Paste (Ctrl+V) into your spreadsheet.');
    }).catch(()=>{
      alert('Could not copy automatically. Please select and copy manually.');
    });
  }

  function collectLessonText(){
    const blocks = [];
    document.querySelectorAll('.card-inner').forEach(inner=>{
      const clone = inner.cloneNode(true);
      clone.querySelectorAll('button').forEach(b=>b.remove());
      clone.querySelectorAll('.pill-tag').forEach(p=>p.remove());
      blocks.push(clone.innerText.trim());
    });
    return blocks.join('\n\n-----------------------------\n\n');
  }
</script>
</body>
</html>
